<ion-header class="add_modal_cont">
  <div class="svg_cls" text-center>
    <img (click)="goBack()" class="close_btn" src="assets/imgs/popup-close-btn.png">
  </div>
</ion-header>
<ion-content class="add_modal_cont">
  <div class="call_ouetr" *ngIf="!showloader">
    <div class="call_opt">
      <ul class="dl_sel_sub_cat dl_sl_st_details">
        <li *ngFor="let stage of stagesSummary">
          <ion-item [ngClass]="stage.stage_class=='currentStage'? dealStatus=='won'?'dl_sts_won':dealStatus=='lost'?'dl_sts_lost':'active_la':''">
            <ion-label (click)="updateDealPendingStatus(stage.id_stage)">{{stage.stage_name}}</ion-label>
          </ion-item>
        </li>
      </ul>
      <div class="dl_btn_ar" *ngIf="dealStatus == 'pending'">
        <a class="cmn_btn_ds bg_lst_grey" (click)="updateDealStatus('lost','lost')">
          <svg width="17px" height="22px" viewBox="0 0 17 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <!-- Generator: sketchtool 49 (51002) - http://www.bohemiancoding.com/sketch -->
            <title>F603DDFF-CBF9-4C03-A962-B45A2EB77EA6</title>
            <desc>Created with sketchtool.</desc>
            <defs>
                <linearGradient x1="50%" y1="100%" x2="50%" y2="3.061617e-15%" id="linearGradient-1">
                    <stop stop-color="#F04E36" offset="0%"></stop>
                    <stop stop-color="#FF9C6C" offset="100%"></stop>
                </linearGradient>
            </defs>
            <g id="Mobile-screens" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                <g id="Assets" transform="translate(-60.000000, -727.000000)" fill="#F04E36">
                    <g id="Actions" transform="translate(0.000000, 583.000000)">
                        <path d="M61.4363845,164.568015 L60.8073394,151.266055 L75.9449541,151.266055 L75.3159091,164.568015 C75.3159091,165.358903 74.6772504,166 73.88945,166 L62.8627786,166 C62.0749783,166 61.4363845,165.358903 61.4363845,164.568015 Z M65.5310235,160.231368 L65.5310235,160.771256 C65.5310235,162.308884 66.606714,162.813623 67.8226469,162.884052 L67.8226469,163.917006 L68.7345804,163.917006 L68.7345804,162.884052 C70.2428205,162.766671 71.119742,162.003758 71.119742,160.289993 C71.119742,157.41435 67.5303397,158.271167 67.5303397,156.557468 C67.5303397,155.994038 67.8226469,155.724127 68.313658,155.724127 C68.6059652,155.724127 68.7930418,155.806293 68.9099647,155.994038 C69.0268875,156.181848 69.0736567,156.475301 69.0736567,156.827444 L70.9677423,156.827444 L70.9677423,156.627896 C70.9677423,155.45415 70.3714356,154.538577 68.7345804,154.409523 L68.7345804,153.540902 L67.8226469,153.540902 L67.8226469,154.409523 C66.1740993,154.550315 65.5661004,155.571531 65.5661004,156.803903 C65.5661004,159.855748 69.1555027,158.88155 69.1555027,160.642202 C69.1555027,161.076447 68.9567338,161.569448 68.2668889,161.569448 C67.6004934,161.569448 67.4251091,161.111661 67.4251091,160.501344 L67.4251091,160.231368 L65.5310235,160.231368 Z M68.3761468,145.505722 C67.4315012,145.505722 66.6293012,146.140605 66.3250365,147.027523 L64.8440367,147.027523 C65.1866546,145.298616 66.6376417,144 68.3761468,144 C70.1145862,144 71.565639,145.298616 71.9082569,147.027523 L70.4273227,147.027523 C70.1229924,146.140605 69.3207923,145.505722 68.3761468,145.505722 Z M60,147.970191 C60,147.970191 64.6746012,147.229358 68.2752943,147.229358 C71.8758575,147.229358 76.5504587,148.034582 76.5504587,148.034582 L76.5504587,149.891686 C76.5504587,150.093375 76.3908176,150.256881 76.1938966,150.256881 L60.3565621,150.256881 C60.1596411,150.256881 60,150.093375 60,149.891686 L60,147.970191 Z" id="Icon-deal-lost"></path>
                    </g>
                </g>
            </g>
        </svg>
          <span>Mark Lost</span>
        </a>
        <a class="cmn_btn_ds bg_won_grey" (click)="updateDealStatus('won','won')">
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="22px" height="22px" viewBox="0 0 22 22"
            version="1.1">
            <!-- Generator: Sketch 48.2 (47327) - http://www.bohemiancoding.com/sketch -->
            <title>Icon deal won</title>
            <desc>Created with Sketch.</desc>
            <defs>
              <path d="M78.6230659,74 C78.2689698,76.0165452 77.8177944,80.3471097 79,82.434361 C75.5389348,83.5648372 69.8675962,89.8883283 66.5264481,96 C64.7330569,93.6447978 60.6323857,89.358406 57,87.9454042 C57.5710924,87.5802884 63.0197072,84.2596409 63.156807,84.1536564 C63.6365479,84.9308261 65.6126422,89.0523365 66.1380589,90.0179313 C70.4330336,80.4030169 75.2305145,75.7928417 78.6230659,74"
                id="path-1" />
              <filter x="-4.5%" y="-4.5%" width="109.1%" height="109.1%" filterUnits="objectBoundingBox" id="filter-2">
                <feGaussianBlur stdDeviation="0.75" in="SourceAlpha" result="shadowBlurInner1" />
                <feOffset dx="0" dy="0.5" in="shadowBlurInner1" result="shadowOffsetInner1" />
                <feComposite in="shadowOffsetInner1" in2="SourceAlpha" operator="arithmetic" k2="-1" k3="1" result="shadowInnerInner1" />
                <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.15 0" type="matrix" in="shadowInnerInner1" />
              </filter>
            </defs>
            <g id="Assets" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" transform="translate(-57.000000, -657.000000)">
              <g id="Actions" transform="translate(0.000000, 583.000000)">
                <g id="Icon-deal-won">
                  <use fill-opacity="0.5" fill="#1F8905" fill-rule="evenodd" xlink:href="#path-1" />
                  <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1" />
                </g>
              </g>
            </g>
          </svg>
          <span>Mark Won</span>
        </a>
      </div>

      <div class="dl_btn_ar" *ngIf="dealStatus != 'pending'" (click)="updateDealStatus('reopn','pending')">
        <a class="cmn_btn_ds bg_lst_grey">
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="15px" height="20px" viewBox="0 0 15 20"
            version="1.1">
            <!-- Generator: Sketch 48.2 (47327) - http://www.bohemiancoding.com/sketch -->
            <title>deal-pending-icon</title>
            <desc>Created with Sketch.</desc>
            <defs/>
            <g id="Assets" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" transform="translate(-70.000000, -3192.000000)"
              opacity="0.300000012">
              <g id="Contact-open" transform="translate(0.000000, 1725.000000)" fill="#000000">
                <g id="History---info" transform="translate(29.000000, 1397.000000)">
                  <path d="M52.9459621,75.4229444 C52.7208701,75.8154166 50.5754393,79.6771447 50.4842199,79.8413712 C50.4052997,79.9832068 50.4048267,80.1554751 50.4827219,80.2979415 C50.5647169,80.4475035 52.4940435,83.971081 52.9968148,84.8194139 C53.4485757,85.5821251 53.4980093,85.9938346 53.4980093,86.6903191 L53.4980093,87.2103566 L52.0155554,87.2103566 C51.6463414,85.4684359 49.2725861,81.5062639 49.1793956,81.3261115 C49.0785575,81.1312945 49.0456807,81.0481169 49.0456807,80.6864716 L49.0456807,80.5122322 L49.0456807,80.5077383 L49.0456807,80.2433832 C49.0456807,79.8818168 49.0785575,79.7985604 49.1793956,79.6037434 C49.2801548,79.4090053 50.9290428,76.5563676 50.9290428,76.5563676 L46.0906281,76.5563676 C46.0906281,76.5563676 47.7416448,79.4356536 47.8430348,79.6084739 C47.9444247,79.7812941 47.9661061,79.9053904 47.9661061,80.260413 L47.9661061,80.5044269 L47.9661061,80.5122322 L47.9661061,80.669363 C47.9661061,81.0244645 47.9444247,81.1485608 47.8430348,81.321381 C47.7490559,81.4815866 45.3489676,85.4293306 44.9987543,87.2103566 L43.427052,87.2103566 L43.427052,86.6903191 C43.427052,85.9938346 43.4765644,85.5821251 43.9283253,84.8194139 C44.4310178,83.971081 46.3603444,80.4475035 46.4423394,80.2979415 C46.5203135,80.1554751 46.5196827,79.9832068 46.4408414,79.8413712 C46.349622,79.6771447 44.20427,75.8154166 43.9790992,75.4229444 C43.6774522,74.8967573 43.4468412,74.4306472 43.4468412,73.6288307 L43.4468412,72.7896434 L53.4782201,72.7896434 L53.4782201,73.6288307 C53.4782201,74.4306472 53.2476091,74.8967573 52.9459621,75.4229444 M54.423922,73.6288307 L54.423922,72.7896434 L54.9479805,72.7896434 C55.1568312,72.7896434 55.3261824,72.6202922 55.3261824,72.4113626 L55.3261824,71.4657395 L55.6099324,71.4657395 C55.8187832,71.4657395 55.9881344,71.2963883 55.9881344,71.0874587 L55.9881344,70.3782808 C55.9881344,70.1693512 55.8187832,70 55.6099324,70 L41.3782019,70 C41.1693512,70 41,70.1693512 41,70.3782808 L41,71.0874587 C41,71.2963883 41.1693512,71.4657395 41.3782019,71.4657395 L41.5673423,71.4657395 L41.5673423,72.4113626 C41.5673423,72.6202922 41.7366936,72.7896434 41.9456231,72.7896434 L42.5011393,72.7896434 L42.5011393,73.6288307 C42.5011393,74.6599967 42.8260445,75.3128819 43.1588338,75.8933907 C43.3496298,76.2261801 45.0115266,79.2160016 45.4874918,80.0726129 C45.0414075,80.8857825 43.5365627,83.6255194 43.1149191,84.3372991 C42.5761962,85.2465763 42.4814289,85.8203836 42.4814289,86.6903191 L42.4814289,87.2103566 L41.9456231,87.2103566 C41.7366936,87.2103566 41.5673423,87.3797867 41.5673423,87.5886374 L41.5673423,88.5342605 L41.3782019,88.5342605 C41.1693512,88.5342605 41,88.7036117 41,88.9125413 L41,89.6217192 C41,89.8306488 41.1693512,90 41.3782019,90 L55.6099324,90 C55.8187832,90 55.9881344,89.8306488 55.9881344,89.6217192 L55.9881344,88.9125413 C55.9881344,88.7036117 55.8187832,88.5342605 55.6099324,88.5342605 L55.3261824,88.5342605 L55.3261824,87.5886374 C55.3261824,87.3797867 55.1568312,87.2103566 54.9479805,87.2103566 L54.4436324,87.2103566 L54.4436324,86.6903191 C54.4436324,85.8203836 54.3488651,85.2465763 53.8101422,84.3372991 C53.3884986,83.6255194 51.8836538,80.8857825 51.4375695,80.0726129 C51.9135347,79.2160016 53.5754315,76.2261801 53.7662275,75.8933907 C54.0990168,75.3128819 54.423922,74.6599967 54.423922,73.6288307"
                    id="deal-pending-icon" />
                </g>
              </g>
            </g>
          </svg>
          <span>Reopen</span>
        </a>
      </div>
    </div>
  </div>

</ion-content>
<div center middle *ngIf="showloader" class="ldr_mask">
  <div class="mask_outer">
    <div class="mask_inner">
      <ion-spinner name="crescent" color="dark"></ion-spinner>
    </div>
  </div>
</div>
